<!--
Renders the user registration page for the application.

This template extends the base.html template and provides a form for users to register
with the application. The form includes fields for the user's username, password, and
role. When the form is submitted, the data is sent to the server for processing.
-->
{% extends "base.html" %}

{% block title %}Registro{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header bg-success text-white">
                    <h4 class="card-title mb-0">
                        <i class="fas fa-user-plus me-2"></i>Registro de Usuario
                    </h4>
                </div>
                <div class="card-body">
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            {% for category, message in messages %}
                                <div class="alert alert-{{ category }}">{{ message }}</div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                    <form method="POST">
                        {{ form.csrf_token }}
                        <div class="form-group">
                            {{ form.nombre_usuario.label }}
                            {{ form.nombre_usuario(class="form-control") }}
                            {% if form.nombre_usuario.errors %}
                                {% for error in form.nombre_usuario.errors %}
                                    <span class="text-danger">{{ error }}</span>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.contrasena.label }}
                            {{ form.contrasena(class="form-control") }}
                            {% if form.contrasena.errors %}
                                {% for error in form.contrasena.errors %}
                                    <span class="text-danger">{{ error }}</span>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.confirm_contrasena.label }}
                            {{ form.confirm_contrasena(class="form-control") }}
                            {% if form.confirm_contrasena.errors %}
                                {% for error in form.confirm_contrasena.errors %}
                                    <span class="text-danger">{{ error }}</span>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="form-group">
                            {{ form.rol.label }}
                            {{ form.rol(class="form-control") }}
                            {% if form.rol.errors %}
                                {% for error in form.rol.errors %}
                                    <span class="text-danger">{{ error }}</span>
                                {% endfor %}
                            {% endif %}
                        </div>
                        {{ form.submit(class="btn btn-primary mt-3") }}
                    </form>
                </div>
                <div class="card-footer text-center">
                    <small class="text-muted">¿Ya tienes una cuenta? <a href="{{ url_for('login') }}">Inicia sesión aquí</a></small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}